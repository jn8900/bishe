<html>
<head>
<title>ylSaveAdd</title>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<style type="text/css">
body { 
	background: url(images/1.png);
	background-repeat: no-repeat;
	text-align: center;		
}

#apDiv7 {
	position: absolute;
	width: 387px;
	height: 50px;
	z-index: 1;
	left: 267px;
	font-family: "华文新魏";
	font-size: 48px;
	top: 21px;
	color: #ca0000;
	text-align: center;
}

#apDiv1 {
	position: absolute;
	width: 64px;
	height: 42px;
	z-index: 2;
	left: 254px;
	top: 96px;
	background-image: url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	line-height: 40px;
}
#apDiv2 {
	position: absolute;
	width: 141px;
	height: 42px;
	z-index: 2;
	left: 319px;
	top: 96px;
	background-image: url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	line-height: 40px;
}
#apDiv3 {
	position: absolute;
	width: 161px;
	height: 42px;
	z-index: 2;
	left: 461px;
	top: 96px;
	background-image: url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	line-height: 40px;
}
#apDiv4 {
	position: absolute;
	width: 141px;
	height: 42px;
	z-index: 2;
	left: 623px;
	top: 96px;
	background-image: url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	line-height: 40px;
}
#apDiv5 {
	position: absolute;
	width: 178px;
	height: 42px;
	z-index: 2;
	left: 765px;
	top: 96px;
	background-image: url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	line-height: 40px;
}
#apDiv6 {
	position: absolute;
	width: 61px;
	height: 42px;
	z-index: 2;
	left: 1036px;
	top: 96px;
	background-image: url(images/a1.png);
	font-family: "华文新魏";
	font-size: 22px;
	color: #FFF;
	text-align: center;
	line-height: 40px;
}
#apDiv8 {
	position: absolute;
	width: 78px;
	height: 64px;
	z-index: 3;
	left: 903px;
	top: 20px;
	background-image: url(images/a2.png);
}

#apDiv11 {
	position: absolute;
	width: 167px;
	height: 42px;
	z-index: 2;
	left: 88px;
	top: 146px;
	background-image: url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	font-family: "华文新魏";
	line-height: 40px;
}
	
#apDiv14 {
	position: absolute;
	width: 167px;
	height: 42px;
	z-index: 2;
	left: 89px;
	top: 199px;
	background-image: url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	font-family: "华文新魏";
	line-height: 40px;
}

#apDiv16 {
	position: absolute;
	width: 33px;
	height: 46px;
	z-index: 6;
	left: 65px;
	top: 190px;
	background-image: url(images/a3.png);
}
#apDiv17 {
	position: absolute;
	width: 34px;
	height: 46px;
	z-index: 7;
	left: 67px;
	top: 280px;
	background-image: url(images/a3.png);
}
#apDiv18 {
	position: absolute;
	width: 275px;
	height: 54px;
	z-index: 8;
	background-image: url(img/6.png);
	left: 748px;
	top: 370px;
}
#apDiv19 {
	position: absolute;
	width: 163px;
	height: 41px;
	z-index: 9;
	left: 78px;
	top: 45px;
	background-image: url(img/2.png);
}
#apDiv20 {
	position: absolute;
	width: 34px;
	height: 46px;
	z-index: 8;
	background-image: url(img/5.png);
	left: 286px;
	top: 350px;
}
#apDiv21 {
	position: absolute;
	width: 202px;
	height: 34px;
	z-index: 9;
	font-family: "华文新魏";
	font-size: 24px;
	color: #C30;
	left: 321px;
	top: 360px;
}

#apDiv9 {
	position: absolute;
	width: 91px;
	height: 42px;
	z-index: 2;
	left: 944px;
	top: 96px;
	background-image:url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	line-height: 40px;
}
#apDiv21 {
	position: absolute;
	width: 167px;
	height: 42px;
	z-index: 2;
	left: 90px;
	top: 251px;
	background-image: url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	font-family: "华文新魏";
	line-height: 40px;
}
#apDiv22 {
	position: absolute;
	width: 167px;
	height: 42px;
	z-index: 2;
	left: 89px;
	top: 302px;
	background-image: url(images/a1.png);
	font-size: 22px;
	color: #FFF;
	text-align: center;
	font-family: "华文新魏";
	line-height: 40px;
}
a:link{
	text-decoration: none;
	color: #FFF;
	font-family: "华文新魏";
	font-size: 22px;
}
a:visited{
	color:#FFF;
	text-decoration: none;
	font-family: "华文新魏";
	font-size:22px;
} 
a:hover {
	text-decoration:none;
	color:#F63; 
	font-size:22px; 
	font-family: "华文新魏";
 }
a:active{
	text-decoration:none;
	color:#FFF; 
	font-size:22px; 
	font-family: "华文新魏";
}
.three{
	position: absolute;
	left: 277px;
	top: 177px;
	width: 796px;
	height: 130px;
	font-family: "华文楷体";
}

#apDiv10 {
	position: absolute;
	width: 200px;
	height: 30px;
	z-index: 4;
	left: 551px;
	top: 160px;
	font-size: 24px;
	font-family: "华文楷体";
	background-color: #CCC;
}

.two ul{
	position: absolute;
	height: 25%;
	width: 200px;
	height: 100px;
	margin: 0 30px;
	left: 18px;
	top: 153px;
			}
.two ul li{
	line-height: 42px;
	float: center;
	text-align: center;
	list-style:none;
	margin:10px 0;
}
.two ul li a{
	display: block;
	background: url(images/a1.png);
	font-weight: bold;
}
.two ul li a:hover{
	background: url(images/a1.png);
	color: #F63;
}
*{margin: 0;padding: 0;}
.center{
	font: "华文楷体";
	font-size: 24px;
	}
</style>
</head>
<body>
	<%@ page contentType="text/html;charset=gb2312"%>
	<%@ page language="java" import="java.sql.*"%>
<!-- ImageReady Slices (regconfirm) -->
<div class="aa">
<div id="apDiv7">爱心公益网后台</div>
</div>
<div id="apDiv8"></div>
<div id="apDiv1"><a href="../index2.jsp">首页</a></div>
<div id="apDiv2"><a href="../user2/yhgl.html">用户信息管理</a></div>
<div id="apDiv3"><a href="../user1/yhgl.html">管理员信息管理</a></div>
<div id="apDiv4"><a href="../mjxx/mjxx.html">募捐信息管理</a></div>
<div id="apDiv9"><a href="../notice/noticegl.html">留言管理</a></div>
<div id="apDiv5"><a href="../yghdxx/yghdxx.html">义工活动信息管理</a></div>
<div id="apDiv6"><a href="../login/login.html">注销</div>


<div class="two">
<ul>
				<li><a href="userlist.jsp">查看所有管理员</a></li>
				<li><a href="yladd.jsp">添加管理员</a></li>
				<li><a href="yledit.jsp">更改管理员信息</a></li>
				<li><a href="yldelete.jsp">删除管理员</a></li>
  </ul>
<table  style="position: absolute; left: 492px; top: 167px; font: '华文楷体'; font-size: 20px;">
	<tr>
		<td>
		<jsp:useBean id="registerbean" scope="page" class="mydb.mydb"/>

<%!
//该函数检验邮件中必须含有@
 boolean checkemail(String str)

 {
  int index;
  boolean check;
  if((index=str.indexOf("@")) != -1)
   check = true;
  else
   check = false;
  return(check);
 }
%>


<%
String name,sex,birthday,password,tel,address,qq,question,answer,u_name,priority,e_mail,password1,memo;


//提交用户注册信息
name=new String(request.getParameter("name").getBytes("ISO8859_1"));
password=request.getParameter("password");
password1=request.getParameter("password1");
u_name=new String(request.getParameter("u_name").getBytes("ISO8859_1"));
question=new String(request.getParameter("question").getBytes("ISO8859_1"));
answer=new String(request.getParameter("answer").getBytes("ISO8859_1"));
sex=new String(request.getParameter("sex").getBytes("ISO8859_1"));
birthday=new String(request.getParameter("birthday").getBytes("ISO8859_1"));
tel=request.getParameter("tel");
qq=request.getParameter("qq");
address=new String(request.getParameter("address").getBytes("ISO8859_1"));
priority=new String(request.getParameter("priority").getBytes("ISO8859_1"));

//将昵称保存下来，在regsuccess.jsp中使用
request.getSession(true);
session.putValue("name",name);


//昵称、密码、验证、问题、答案为空
if (password==null || password1.equals("") || question.equals("") || answer.equals("") || name.equals("")  )
{%>
	<script language='javascript'> 
		alert('请填写完整') 
		window.history.back()   
	</script>
<%}
else
//密码与验证不符
if(!password.equals(password1))
	{
%>
<script language='javascript'> 
  alert('密码与验证不符') 
window.history.back()   
</script>

 <%}

 else  
 //重名   
 { 
    String sql="select * from user where name='"+name+"'";
    ResultSet rs=registerbean.executeQuery(sql);
  if (rs.next())
    {%>
    <script language='javascript'> 
     alert('重名，请换一个名字') 
 window.history.back()  
    </script>
       <% rs.close();}
   else{ %>
   <form method=post action="yllist.jsp">
<input type="hidden" name="name" value="<%=name%>">
<input type="hidden" name="password" value="<%=password%>">
<input type="hidden" name="password1" value="<%=password1%>">
<input type="hidden" name="question" value="<%=question%>">
<input type="hidden" name="answer" value="<%=answer%>">
<input type="hidden" name="sex" value="<%=sex%>">
<input type="hidden" name="birthday" value="<%=birthday%>">
<input type="hidden" name="tel" value="<%=tel%>">
<input type="hidden" name="qq" value="<%=qq%>">
<input type="hidden" name="address" value="<%=address%>">
<input type="hidden" name="u_name" value="<%=u_name%>">
<input type="hidden" name="priority" value="<%=priority%>">
<div class="one">   
   <p align="center" class="two">以下是用户的信息，请确认！ </p>
   <div align="center" >
  <center>
  <table>
  <div class="three">
    <tr>
      <td align="center" ><p>昵称：</p></td>
      <td align="center" ><%=name%></td>
    </tr>
    <tr>
      <td align="center" ><p>密码：</p></td>
      <td align="center"><%=password%></td>
    </tr>
    <tr>
      <td align="center" ><p>密码提示问题：</p></td>
      <td align="center"><%=question%></td>
    </tr>
	<tr>
      <td align="center" ><p>问题回答答案：</p></td>
      <td align="center"><%=answer%></td>
    </tr>
	<tr>
      <td align="center" ><p>真实姓名：</p></td>
      <td align="center"><%=u_name%></td>
    </tr>
	<tr>
      <td align="center" ><p>性别：</p></td>
      <td  align="center"><%=sex%></td>
    </tr>
	<tr>
      <td align="center" ><p>出生年月日：</p></td>
      <td align="center"><%=birthday%></td>
    </tr>
	<tr>
      <td align="center" ><p>电话：</p></td>
      <td align="center"><%=tel%></td>
    </tr>
	<tr>
      <td align="center" ><p>QQ号：</p></td>
      <td align="center"><%=qq%></td>
    </tr>
	<tr>
      <td align="center"><p>家庭住址：</p></td>
      <td align="center"><%=address%></td>
    </tr>
	<tr>
      <td align="center" ><p>角色：</p></td>
      <td align="center"><%=priority%></td>
    </tr>
	
  </table>
  </center>
</div>
<p align="center">
<input type="submit" value="确认添加">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<input type="button" value="返回修改" onClick="history.back()"></p>

</form>
</div>
</div>
</div>
 <%}}%>
		</td>
	</tr>
</table>
<!-- End ImageReady Slices -->
</body>
</html>